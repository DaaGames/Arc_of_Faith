<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Arcfall</title>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Open+Sans&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <nav>
    <div class="logo">ARCFALL</div>
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="about.html">About</a></li>
      <li><a href="seasons.html">Seasons</a></li>
      <li><a href="community.html">Community</a></li>
    </ul>
  </nav>

  <header>
    <h1>ARCFALL</h1>
    <p class="tagline">A Biblical Adventure Awaits</p>
  </header>

  <main>
    <section class="section">
      <h2>Season 1: The Ark Awakens</h2>
      <p>Explore the mysteries of the island, uncover the lost Arc Engine, and prepare for anything.</p>
      <a class="btn" href="https://youtube.com/@arcfall_yt?si=kMsHjd5q6om5ne-8" target="_blank" rel="noopener noreferrer">Visit YouTube</a>
    </section>

    <section class="section">
      <button class="btn" onclick="toggleLearnMore()">Learn More</button>
      <div id="learnMoreText" class="learn-more-text" style="display: none;">
        Arcfall is a fast-paced third-person shooter set in a world touched by the lost Arc Engine. Each season is inspired by a different biblical story and features a race to control the world-altering Arc Engineâ€”a device capable of bending reality itself.
      </div>
    </section>

    <section class="section voting">
      <h2>Vote for the Next Item</h2>
      <div id="countdown-timer">Loading countdown...</div>
      <div class="vote-options">
        <div class="vote-box" data-id="option1">
          <div class="vote-image"></div>
          <p>Option 1</p>
          <div class="vote-bar-container">
            <div class="vote-bar" id="bar-option1"></div>
          </div>
          <p id="percent-option1">0%</p>
          <button class="btn" onclick="vote('option1')">Vote</button>
        </div>
        <div class="vote-box" data-id="option2">
          <div class="vote-image"></div>
          <p>Option 2</p>
          <div class="vote-bar-container">
            <div class="vote-bar" id="bar-option2"></div>
          </div>
          <p id="percent-option2">0%</p>
          <button class="btn" onclick="vote('option2')">Vote</button>
        </div>
        <div class="vote-box" data-id="option3">
          <div class="vote-image"></div>
          <p>Option 3</p>
          <div class="vote-bar-container">
            <div class="vote-bar" id="bar-option3"></div>
          </div>
          <p id="percent-option3">0%</p>
          <button class="btn" onclick="vote('option3')">Vote</button>
        </div>
      </div>
    </section>
  </main>

  <footer>Daa Games</footer>

  <script>
    function toggleLearnMore() {
      const text = document.getElementById("learnMoreText");
      text.style.display = text.style.display === "none" ? "block" : "none";
    }
  </script>

  <script type="module" src="voting.js"></script>
  <script type="module">
    import { listenForVotes, updateVotesUI, enableVoteButtons, startCountdown } from './voting.js';

    const itemIds = ["option1", "option2", "option3"];

    // Start the voting countdown timer display
    startCountdown("countdown-timer");

    // Enable or disable voting buttons depending on vote status and time
    enableVoteButtons();

    // Listen for live updates to votes and update UI accordingly
    listenForVotes(itemIds);

    // Initialize UI bars with current votes from Firestore
    updateVotesUI(itemIds);
  </script>
</body>
</html>
